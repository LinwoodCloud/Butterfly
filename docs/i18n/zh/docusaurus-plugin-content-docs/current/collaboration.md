---
sidebar_label: 合作
sidebar_position: 4
title: 合作
---

:::warning 🧪 Experiment

此功能在实验旗帜后面。 阅读更多 [here](/nightly#experiments)。
本节中的所有内容都会有变化。

:::

## 一. 导言

计入了 2.0 测试版，Butterfare 支持合作。 这意味着您可以同时与多人编辑相同的文件。 如果你想要在文档中一起工作，这将是有用的。

## 它的工作方式

Butterfirm使用一个将托管在您的计算机上的Websocket服务器。 此服务器需要能够从互联网或您的本地网络访问。 客户端将连接到此服务器。 服务器与所有客户端同步所有更改和事件。

## 设置服务器

:::note

此服务器功能在网络上不可用。

:::

首先，在设置中启动协作实验。 打开文档后，您想要共享。 然后点击标题左上角的分享按钮。 这将打开一个对话框。 点击"启动服务器"。

默认服务器将在端口“28005”上的所有接口上被托管。 您可以在对话框中更改此项。 您需要确保客户端可以访问此服务器。
在本地网络中，这应该能够用到箱子里面。 如果您想从互联网访问服务器，您需要在路由器中转发端口。 您可以找到更多关于 [here]的信息(https://en.wikipedia.org/wiki/port_forwarding/)。

如果您不能转发端口，您可以使用类似 [ngrok](https://ngrok.com/)。 这将为您的本地服务器创建一个隧道。 如果您想要与其他人分享文档，这是有用的。

对于ngrok，命令看起来像这样：

```bash
ngrok http 28005
```

## 连接到服务器

现在您需要连接到服务器。 要做到这一点，请前往主页并点击加号按钮创建新文档。 您将在这里看到一个名为“连接”的新菜单项。

点击此项，您将看到一个对话框。 在此输入连接URL。
如果您在同一网络中，您可以使用服务器运行的计算机的本地IP地址。
The url should look like this: `ws://{ip}:28005`. Replace `{ip}` with the ip address of the computer. 您可以在窗口上找到命令`ipconfig`的IP地址或在linux上找到`ifconfig`。 在 android 上，您可以在 wifi 设置中找到IP地址。

如果您不在同一网络中，您需要使用计算机的公共IP地址。 您可以通过在您最喜欢的搜索浏览器中搜索“我的ip”来找到这个问题。 这个网址应该像上面的网址，但是使用公共IP地址。

如果您使用ngrok，安装程序有些不同。 将`https://tns`替换为 `wss`，并在结尾处添加端口`:28005`。 The url should look like this: `wss://{random}:28005`. 将随机部件替换为ngrok给你的部件。
